[gd_scene load_steps=9 format=3 uid="uid://dy7y8ni7184re"]

[ext_resource type="Script" uid="uid://cijjyr2evynnk" path="res://Actors/Player/player.gd" id="1_4flbx"]
[ext_resource type="PackedScene" uid="uid://0ki07udwa4vf" path="res://Actors/Player/laser.tscn" id="2_b63gh"]

[sub_resource type="SegmentShape2D" id="SegmentShape2D_4bcxw"]
b = Vector2(0, 0)

[sub_resource type="CircleShape2D" id="CircleShape2D_pnakb"]
radius = 5.0

[sub_resource type="Curve" id="Curve_isd1h"]
_limits = [0.0, 2.0, 0.0, 1.0]
_data = [Vector2(0, 2), 0.0, -0.0333676, 0, 0, Vector2(0.868534, 0.523914), -5.57043, -5.57043, 0, 0, Vector2(1, 0.124315), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="Gradient" id="Gradient_8gtf5"]
offsets = PackedFloat32Array(0, 0.409756, 0.756098, 1)
colors = PackedColorArray(0.25, 0.25, 0.25, 1, 0.86, 0.86, 0.86, 1, 0.86, 0.86, 0.86, 1, 1, 1, 1, 1)

[sub_resource type="Gradient" id="Gradient_5ni5v"]
offsets = PackedFloat32Array(0.752308, 1)
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="Gradient" id="Gradient_v1key"]
colors = PackedColorArray(0.75, 0.75, 0.75, 1, 1, 1, 1, 1)

[node name="Player" type="Area2D" node_paths=PackedStringArray("thrust", "rotate_container", "death_particles")]
z_index = 3
collision_layer = 0
collision_mask = 18
script = ExtResource("1_4flbx")
thrust = NodePath("Container/Thrust")
rotate_container = NodePath("Container")
death_particles = NodePath("Container/Death")
laser_scene = ExtResource("2_b63gh")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("SegmentShape2D_4bcxw")

[node name="Hitbox" type="Area2D" parent="."]
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
shape = SubResource("CircleShape2D_pnakb")

[node name="Container" type="Node2D" parent="."]

[node name="Thrust" type="CPUParticles2D" parent="Container"]
z_index = -2
emitting = false
amount = 32
lifetime_randomness = 0.03
direction = Vector2(-1, 0)
spread = 10.0
gravity = Vector2(0, 0)
initial_velocity_min = 40.0
initial_velocity_max = 60.0
angular_velocity_min = -20.0
angular_velocity_max = 20.0
linear_accel_max = 50.0
radial_accel_min = -5.0
radial_accel_max = 5.0
tangential_accel_min = -10.0
tangential_accel_max = 10.0
scale_amount_curve = SubResource("Curve_isd1h")
color = Color(0.866667, 0.337255, 0.223529, 1)
color_initial_ramp = SubResource("Gradient_8gtf5")

[node name="Death" type="CPUParticles2D" parent="Container"]
emitting = false
amount = 20
one_shot = true
explosiveness = 1.0
local_coords = true
spread = 180.0
gravity = Vector2(0, 0)
initial_velocity_min = 8.0
initial_velocity_max = 34.0
scale_amount_min = 3.0
scale_amount_max = 3.0
color = Color(0.12549, 0.647059, 0.65098, 1)
color_ramp = SubResource("Gradient_5ni5v")
color_initial_ramp = SubResource("Gradient_v1key")

[node name="InvincibilityTimeout" type="Timer" parent="."]
wait_time = 10.0
one_shot = true
autostart = true

[node name="InvincibilityFlash" type="Timer" parent="."]
wait_time = 0.5
autostart = true

[connection signal="area_entered" from="." to="." method="_on_area_entered"]
[connection signal="timeout" from="InvincibilityTimeout" to="." method="_on_invincibility_timeout_timeout"]
[connection signal="timeout" from="InvincibilityTimeout" to="." method="damage" binds= [0, 1]]
[connection signal="timeout" from="InvincibilityFlash" to="." method="flash" binds= [0.25]]
